<div class="perfil-trabajador">
  <!-- Tabs de navegación -->
  <app-tabs-perfil 
    [activeTab]="activeTab"
    (tabChange)="onTabChange($event)">
  </app-tabs-perfil>

  <!-- Contenido del tab activo -->
  <div class="perfil-trabajador__content">
    
    <!-- Tab: Perfil Público -->
    <div *ngIf="activeTab === 'perfil-publico'" class="perfil-trabajador__tab-content">
      <!-- Progreso del perfil -->
      <app-progress-perfil 
        [progress]="profileProgress"
        suggestion="Sugerencia: Añade fotos a tu portafolio para llegar al 100%.">
      </app-progress-perfil>

      <!-- Información básica -->
      <app-info-basica 
        [info]="basicInfo"
        (infoChange)="onBasicInfoChange($event)">
      </app-info-basica>

      <!-- Fotos de perfil -->
      <app-seccion-fotos 
        (changeProfilePhoto)="onProfilePhotoChange($event)"
        (changeCoverPhoto)="onCoverPhotoChange($event)">
      </app-seccion-fotos>

      <!-- Sobre mí -->
      <app-sobre-mi 
        [bio]="bio"
        (bioChange)="onBioChange($event)">
      </app-sobre-mi>

      <!-- Mis servicios -->
      <app-mis-servicios 
        [services]="services"
        (editService)="onEditService($event)"
        (deleteService)="onDeleteService($event)"
        (addService)="onAddService()">
      </app-mis-servicios>

      <!-- Portafolio -->
      <app-portafolio 
        [images]="portfolioImages"
        [maxImages]="10"
        (addImage)="onAddPortfolioImage()"
        (addVideo)="onAddPortfolioVideo()"
        (deleteImage)="onDeletePortfolioImage($event)">
      </app-portafolio>

      <!-- Ubicación y Disponibilidad -->
      <app-ubicacion-disponibilidad 
        [settings]="locationSettings"
        (settingsChange)="onLocationSettingsChange($event)"
        (addCoverageZone)="onAddCoverageZone($event)"
        (removeCoverageZone)="onRemoveCoverageZone($event)">
      </app-ubicacion-disponibilidad>
    </div>

    <!-- Tab: Verificación -->
    <div *ngIf="activeTab === 'verificacion'" class="perfil-trabajador__tab-content">
      <div class="verificacion-placeholder">
        <h2>Verificación</h2>
        <p>Contenido de verificación pendiente de implementar.</p>
        <p>Aquí se mostrarán los documentos de verificación, estado de verificación, etc.</p>
      </div>
    </div>

    <!-- Tab: Configuración -->
    <div *ngIf="activeTab === 'configuracion'" class="perfil-trabajador__tab-content">
      <!-- Configuración del Perfil de la Aplicación -->
      <section class="configuracion-app">
        <h2 class="configuracion-app__title">Configuración del Perfil de la Aplicación</h2>
        <p class="configuracion-app__subtitle">Estas configuraciones son privadas y solo las ves tú. No afectan tu perfil público.</p>
        
        <div class="configuracion-app__content">
          <div class="configuracion-app__avatar">
            <avatar-uploader [(src)]="avatar"></avatar-uploader>
          </div>
          
          <div class="configuracion-app__fields">
            <ui-input label="Nombre" placeholder="Tu nombre" [(value)]="name"></ui-input>
            <ui-input label="Teléfono" placeholder="Ej: +56 9 1234 5678" [(value)]="phone"></ui-input>
            
            <div class="configuracion-app__field">
              <label class="configuracion-app__label">Idioma</label>
              <language-select [(value)]="lang"></language-select>
            </div>
            
            <div class="configuracion-app__field">
              <label class="configuracion-app__label">Notificaciones</label>
              <notification-toggle [(email)]="emailNoti" [(push)]="pushNoti"></notification-toggle>
            </div>
          </div>
          
          <div class="configuracion-app__actions">
            <ui-button variant="primary" (click)="save()">Guardar cambios</ui-button>
          </div>
        </div>
      </section>

      <!-- Horario y Disponibilidad -->
      <app-horario-disponibilidad 
        [schedule]="weeklySchedule"
        (scheduleChange)="onScheduleChange($event)"
        (addTimeBlock)="onAddTimeBlock($event)"
        (removeTimeBlock)="onRemoveTimeBlock($event)"
        (toggleDay)="onToggleDay($event)">
      </app-horario-disponibilidad>

      <!-- Excepciones y Feriados -->
      <app-excepciones-feriados 
        [exceptions]="exceptions"
        (exceptionsChange)="onExceptionsChange($event)"
        (addException)="onAddException($event)"
        (removeException)="onRemoveException($event)">
      </app-excepciones-feriados>
    </div>

  </div>
</div>
