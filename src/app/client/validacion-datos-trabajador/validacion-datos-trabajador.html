<!-- Contenedor principal que simula la pantalla de un móvil -->
<div class="validation-container">
  <div class="validation-content">
     
    <!-- Header Fijo -->
    <div class="header">
      <button (click)="onGoBack()" id="backButton" class="back-button">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
        </svg>
      </button>
      <h1 class="subtitle">Verificación de Perfil</h1>
      <div style="width: 1.5rem;"></div> <!-- Espaciador para centrar el título -->
    </div>

    <!-- Indicador de Progreso -->
    <div class="progress-container" id="progressIndicator">
      <div class="progress-steps">
        <span id="step-text-1" class="progress-step active">Bienvenida</span>
        <span id="step-text-2" class="progress-step">Documentos</span>
        <span id="step-text-3" class="progress-step">Revisión</span>
      </div>
      <div class="progress-bar">
        <div id="progressBar" class="progress-fill" style="width: 25%;"></div>
      </div>
    </div>

    <div style="flex-grow: 1; display: flex; flex-direction: column;">
      <!-- Contenedor de Pasos (se mostrará uno a la vez) -->
      <div id="stepContainer" style="flex-grow: 1; display: flex; flex-direction: column;">

        <!-- Paso 1: Bienvenida -->
        <div id="step-1" class="fade-in" style="flex-grow: 1; display: flex; flex-direction: column;">
          <div style="text-align: center; flex-grow: 1; display: flex; flex-direction: column; justify-content: center;">
            <div class="icon-container">
              <svg xmlns="http://www.w3.org/2000/svg" style="width: 2.5rem; height: 2.5rem; color: #4f46e5;" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </div>
            <h2 class="title">Construyamos un perfil de confianza</h2>
            <p class="description">Verificar tu identidad nos ayuda a mantener Adomiapp como una comunidad segura para clientes y profesionales. Tu información está protegida.</p>
            <p class="note">Necesitarás tu <strong>Cédula de Identidad</strong> vigente.</p>
          </div>
          <button (click)="onGoToStep(2)" class="btn-primary" style="margin-top: 2rem;">
            Empezar Verificación
          </button>
        </div>

        <!-- Paso 2: Subida de Documentos -->
        <div id="step-2" class="hidden fade-in" style="flex-grow: 1; display: flex; flex-direction: column;">
          <h2 class="title" style="margin-bottom: 0.5rem;">Sube tu Cédula de Identidad</h2>
          <p class="description" style="margin-bottom: 1.5rem;">Asegúrate de que las fotos sean claras y todos los datos legibles.</p>

          <!-- Anverso -->
          <div style="margin-bottom: 1rem;">
            <p style="font-weight: 600; color: #374151; margin-bottom: 0.5rem;">1. Lado Frontal (Anverso)</p>
            <label for="front-file" class="upload-area upload-box" style="cursor: pointer;">
              <input 
                id="front-file" 
                type="file" 
                accept="image/*" 
                (change)="onFileSelected($event, 'front')"
                style="display: none;"
              >
              <div id="icon-front">
                <svg xmlns="http://www.w3.org/2000/svg" style="width: 2.5rem; height: 2.5rem; color: #9ca3af;" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
              </div>
              <p id="text-front" style="margin-top: 0.5rem; font-size: 0.875rem; font-weight: 500; color: #6b7280;">Tocar para subir foto</p>
            </label>
          </div>

          <!-- Reverso -->
          <div style="margin-bottom: auto;">
            <p style="font-weight: 600; color: #374151; margin-bottom: 0.5rem;">2. Lado Trasero (Reverso)</p>
            <label for="back-file" class="upload-area upload-box" style="cursor: pointer;">
              <input 
                id="back-file" 
                type="file" 
                accept="image/*" 
                (change)="onFileSelected($event, 'back')"
                style="display: none;"
              >
              <div id="icon-back">
                <svg xmlns="http://www.w3.org/2000/svg" style="width: 2.5rem; height: 2.5rem; color: #9ca3af;" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
              </div>
              <p id="text-back" style="margin-top: 0.5rem; font-size: 0.875rem; font-weight: 500; color: #6b7280;">Tocar para subir foto</p>
            </label>
          </div>
         
          <!-- Mensaje de error -->
          <div *ngIf="uploadError" style="margin-top: 1rem; padding: 0.75rem; background-color: #fef2f2; border: 1px solid #fecaca; border-radius: 0.5rem; color: #dc2626; font-size: 0.875rem;">
            {{ uploadError }}
          </div>

          <button 
            id="submitDocsButton" 
            (click)="uploadDocuments()" 
            class="btn-primary" 
            style="margin-top: 2rem;" 
            [disabled]="!uploadStatus.front || !uploadStatus.back || isUploading"
          >
            <span *ngIf="!isUploading">Enviar Documentos</span>
            <span *ngIf="isUploading">Subiendo...</span>
          </button>
        </div>

        <!-- Paso 3: En Revisión -->
        <div id="step-3" class="hidden fade-in" style="flex-grow: 1; display: flex; flex-direction: column; text-align: center; justify-content: center;">
          <div class="icon-container success">
            <svg xmlns="http://www.w3.org/2000/svg" style="width: 2.5rem; height: 2.5rem; color: #d97706;" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </div>
          <h2 class="title">Documentos en revisión</h2>
          <p class="description">Recibimos tu información. Nuestro equipo la revisará y te notificaremos en las próximas <strong>24-48 horas</strong>.</p>
          <p class="note">Puedes cerrar esta ventana. Te avisaremos por email y notificación en la app.</p>

          <button (click)="onFinishProcess()" class="btn-secondary" style="margin-top: 3rem;">
            Entendido
          </button>
        </div>

        <!-- Estado Final: Aprobado -->
        <div id="step-final-success" class="hidden fade-in" style="flex-grow: 1; display: flex; flex-direction: column; text-align: center; justify-content: center;">
          <div class="icon-container final checkmark-circle">
            <svg style="width: 100%; height: 100%;" viewBox="0 0 52 52">
              <circle style="color: #dcfce7;" cx="26" cy="26" r="25" fill="currentColor"/>
              <path class="checkmark-path" style="color: #16a34a;" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" d="M14 27l7 7 16-16"/>
            </svg>
          </div>
          <h2 class="title">¡Perfil Verificado!</h2>
          <p class="description" style="margin-bottom: 0.5rem;">Felicidades, tu identidad ha sido confirmada.</p>
          <span class="status-badge">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zM9 11a1 1 0 112 0v2a1 1 0 11-2 0v-2z" clip-rule="evenodd" />
              <path d="M10 5a1 1 0 100 2 1 1 0 000-2z" />
            </svg>
            Perfil Verificado
          </span>
         
          <button (click)="onFinishProcess()" class="btn-primary" style="margin-top: 3rem;">
            Finalizar
          </button>
        </div>

      </div>
    </div>
  </div>
</div>