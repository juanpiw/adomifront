<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adomi - Búsqueda Avanzada</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Datepicker CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" type="text/css" href="https://npmcdn.com/flatpickr/dist/themes/light.css">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* bg-slate-50 */
        }
        .results-list::-webkit-scrollbar { width: 8px; }
        .results-list::-webkit-scrollbar-track { background: #f1f5f9; } /* bg-slate-100 */
        .results-list::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; } /* bg-slate-300 */
        .results-list::-webkit-scrollbar-thumb:hover { background: #94a3b8; } /* bg-slate-400 */
        
        /* Estilos para el Datepicker Elegante */
        .flatpickr-calendar {
            box-shadow: none !important;
            border: none !important;
            width: 100%;
        }
        .flatpickr-day.selected {
            background: #4f46e5; /* bg-indigo-600 */
            border-color: #4f46e5;
        }
        .flatpickr-day:hover {
            background: #e0e7ff; /* bg-indigo-100 */
        }
        .flatpickr-time {
            border-top: 1px solid #e2e8f0; /* border-slate-200 */
        }
        .numInputWrapper:hover { background: #f1f5f9; }
        .flatpickr-time .numInput:hover, .flatpickr-time .numInput:focus { background: transparent; }
    </style>
</head>
<body class="bg-slate-50">

    <div class="flex h-screen">
        <!-- 1. Menú Lateral de Navegación -->
        <aside class="w-64 bg-white flex flex-col border-r border-slate-200 flex-shrink-0">
            <div class="p-6">
                <h1 class="text-2xl font-bold text-slate-800">Adomi Cliente</h1>
            </div>
            <nav class="flex-grow px-4">
                <a href="#" class="flex items-center px-4 py-3 bg-indigo-50 text-indigo-600 font-semibold rounded-xl">
                    <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                    Explorar
                </a>
                <a href="#" class="flex items-center px-4 py-3 text-slate-600 hover:bg-slate-100 rounded-xl mt-2 transition-colors">
                    <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                    Mis Reservas
                </a>
                 <a href="#" class="flex items-center px-4 py-3 text-slate-600 hover:bg-slate-100 rounded-xl mt-2 transition-colors">
                    <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path></svg>
                    Favoritos
                </a>
                <a href="#" class="flex items-center px-4 py-3 text-slate-600 hover:bg-slate-100 rounded-xl mt-2 transition-colors">
                     <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
                    Mi Perfil
                </a>
            </nav>
            <div class="p-4 mt-auto">
                 <a href="#" class="flex items-center px-4 py-3 text-slate-600 hover:bg-slate-100 rounded-xl transition-colors">
                    <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg>
                    Salir
                </a>
            </div>
        </aside>

        <!-- 2. Contenido Principal -->
        <main class="flex-grow flex flex-col p-8 overflow-hidden">
            <header class="mb-6 flex-shrink-0 relative">
                <h2 class="text-3xl font-bold text-slate-900">Encuentra disponibilidad ahora</h2>
                <div class="mt-4 bg-white p-2.5 rounded-2xl shadow-lg border border-slate-200 flex items-center space-x-2">
                    <!-- Filtro QUÉ -->
                    <div class="flex-grow">
                         <label class="text-xs font-semibold text-slate-500 ml-3">SERVICIO</label>
                         <input id="service-search" type="text" placeholder="Estilista, Chef..." class="w-full p-2 border-none rounded-lg focus:outline-none focus:ring-0 text-lg font-semibold text-slate-800">
                    </div>
                    <div class="h-12 border-l border-slate-200"></div>
                    <!-- Filtro DÓNDE (Interactivo) -->
                    <div id="location-filter" class="flex-grow cursor-pointer p-2 rounded-lg hover:bg-slate-100 transition-colors">
                         <label class="text-xs font-semibold text-slate-500 ml-1">ZONA</label>
                         <div id="location-display" class="w-full border-none rounded-lg text-lg font-semibold text-slate-800 ml-1">San Bernardo</div>
                    </div>
                    <div class="h-12 border-l border-slate-200"></div>
                    <!-- Filtro CUÁNDO (Interactivo) -->
                    <div id="date-filter" class="flex-grow cursor-pointer p-2 rounded-lg hover:bg-slate-100 transition-colors">
                         <label class="text-xs font-semibold text-slate-500 ml-1">FECHA Y HORA</label>
                         <div id="date-display" class="w-full border-none rounded-lg text-lg font-semibold text-slate-800 ml-1">Ahora</div>
                    </div>
                    <button class="bg-indigo-600 text-white rounded-xl p-4 hover:bg-indigo-700 transition-all duration-300 transform hover:scale-105">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                    </button>
                </div>

                <!-- Popover para ZONA -->
                <div id="location-popover" class="hidden absolute top-full mt-2 w-1/3 bg-white border border-slate-200 rounded-2xl shadow-xl z-10 p-4">
                    <input id="comuna-search" type="text" placeholder="Busca tu comuna..." class="w-full px-4 py-2 border border-slate-300 rounded-xl mb-4 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                    <ul id="comuna-list" class="max-h-60 overflow-y-auto"></ul>
                </div>
                
                <!-- Popover para FECHA Y HORA -->
                <div id="date-popover" class="hidden absolute top-full mt-2 bg-white border border-slate-200 rounded-2xl shadow-xl z-10 p-4 w-[360px]">
                    <div class="flex space-x-2 mb-4">
                        <button class="date-quick-select flex-1 px-4 py-2 bg-slate-100 text-slate-700 font-semibold rounded-xl hover:bg-indigo-100 hover:text-indigo-600 text-sm transition-colors" data-date="any">Cualquier fecha</button>
                        <button class="date-quick-select flex-1 px-4 py-2 bg-slate-100 text-slate-700 font-semibold rounded-xl hover:bg-indigo-100 hover:text-indigo-600 text-sm transition-colors" data-date="today">Hoy</button>
                        <button class="date-quick-select flex-1 px-4 py-2 bg-slate-100 text-slate-700 font-semibold rounded-xl hover:bg-indigo-100 hover:text-indigo-600 text-sm transition-colors" data-date="tomorrow">Mañana</button>
                    </div>
                    <div id="datepicker-container"></div>
                    <div class="border-t border-slate-200 mt-4 pt-4">
                         <p class="text-sm font-semibold text-slate-600 mb-2 text-center">Bloques de tiempo</p>
                         <div class="grid grid-cols-3 gap-2">
                             <button class="time-block-select text-sm px-2 py-2 bg-slate-100 text-slate-700 font-semibold rounded-xl hover:bg-indigo-100 hover:text-indigo-600 transition-colors">Mañana <span class="block text-xs text-slate-500">9-12h</span></button>
                             <button class="time-block-select text-sm px-2 py-2 bg-slate-100 text-slate-700 font-semibold rounded-xl hover:bg-indigo-100 hover:text-indigo-600 transition-colors">Tarde <span class="block text-xs text-slate-500">13-18h</span></button>
                             <button class="time-block-select text-sm px-2 py-2 bg-slate-100 text-slate-700 font-semibold rounded-xl hover:bg-indigo-100 hover:text-indigo-600 transition-colors">Noche <span class="block text-xs text-slate-500">19-22h</span></button>
                         </div>
                    </div>
                     <div class="mt-4">
                        <button id="apply-date" class="w-full bg-indigo-600 text-white font-bold py-2.5 rounded-xl hover:bg-indigo-700 transition-all duration-300 transform hover:scale-105">Aplicar</button>
                    </div>
                </div>

            </header>
            
             <div class="flex items-center space-x-3 mb-6 flex-shrink-0">
                <button class="px-4 py-2 bg-white border border-slate-300 rounded-full text-sm font-semibold text-slate-700 hover:bg-slate-100 transition-colors">Rango de Precio</button>
                <button class="px-4 py-2 bg-white border border-slate-300 rounded-full text-sm font-semibold text-slate-700 hover:bg-slate-100 transition-colors">Calificación</button>
                <button class="px-4 py-2 bg-white border border-slate-300 rounded-full text-sm font-semibold text-slate-700 hover:bg-slate-100 transition-colors">Más filtros</button>
            </div>


            <!-- Layout de Mapa y Lista -->
            <section class="flex-grow flex overflow-hidden rounded-2xl border border-slate-200 shadow-sm">
                <aside class="w-1/3 bg-white p-4 overflow-y-auto results-list">
                    <h3 class="text-lg font-bold text-slate-800 mb-4">5 estilistas disponibles</h3>
                    <div class="p-4 rounded-2xl border-2 border-indigo-500 bg-indigo-50 mb-4">
                        <div class="flex items-start">
                            <img src="https://placehold.co/64x64/C7D2FE/4338CA?text=ET" alt="Elena Torres" class="w-16 h-16 rounded-xl object-cover">
                            <div class="ml-4">
                                <p class="font-bold text-lg text-slate-900">Elena Torres</p>
                                <p class="text-sm text-slate-600">Estilista Profesional</p>
                                <div class="flex items-center mt-1">
                                    <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                                    <span class="text-slate-700 font-semibold ml-1">4.9</span>
                                    <span class="text-slate-500 text-sm ml-2">(85)</span>
                                </div>
                            </div>
                        </div>
                        <button class="mt-3 w-full bg-indigo-600 text-white font-semibold py-2.5 rounded-xl hover:bg-indigo-700 transition-all duration-300 transform hover:scale-105">Ver perfil y Agendar</button>
                    </div>
                </aside>
                <div class="w-2/3 bg-slate-200 flex items-center justify-center">
                    <p class="text-slate-500 font-semibold">[ Aquí iría el mapa interactivo ]</p>
                </div>
            </section>
        </main>
    </div>

    <!-- Datepicker JS -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const locationFilter = document.getElementById('location-filter');
            const locationPopover = document.getElementById('location-popover');
            const locationDisplay = document.getElementById('location-display');
            const comunaSearch = document.getElementById('comuna-search');
            const comunaList = document.getElementById('comuna-list');

            const dateFilter = document.getElementById('date-filter');
            const datePopover = document.getElementById('date-popover');
            const dateDisplay = document.getElementById('date-display');
            const applyDateBtn = document.getElementById('apply-date');
            
            const comunas = ["Santiago", "Providencia", "Las Condes", "Vitacura", "Lo Barnechea", "Ñuñoa", "La Reina", "Macul", "Peñalolén", "La Florida", "San Joaquín", "La Granja", "El Bosque", "San Bernardo", "Puente Alto", "Maipú", "Cerrillos", "Estación Central", "Quinta Normal", "Lo Prado", "Pudahuel", "Cerro Navia", "Renca", "Quilicura", "Huechuraba", "Conchalí", "Independencia", "Recoleta"];

            const renderComunas = (filter = '') => {
                comunaList.innerHTML = '';
                const filteredComunas = comunas.filter(c => c.toLowerCase().includes(filter.toLowerCase()));
                filteredComunas.forEach(comuna => {
                    const li = document.createElement('li');
                    li.textContent = comuna;
                    li.className = 'p-2 rounded-lg hover:bg-slate-100 cursor-pointer transition-colors';
                    li.onclick = () => {
                        locationDisplay.textContent = comuna;
                        locationPopover.classList.add('hidden');
                    };
                    comunaList.appendChild(li);
                });
            };

            locationFilter.addEventListener('click', (e) => {
                e.stopPropagation();
                datePopover.classList.add('hidden');
                locationPopover.classList.toggle('hidden');
                if (!locationPopover.classList.contains('hidden')) {
                    locationPopover.style.left = `${locationFilter.offsetLeft}px`;
                }
                renderComunas();
            });
            
            comunaSearch.addEventListener('input', () => renderComunas(comunaSearch.value));

            dateFilter.addEventListener('click', (e) => {
                e.stopPropagation();
                locationPopover.classList.add('hidden');
                datePopover.classList.toggle('hidden');
                 if (!datePopover.classList.contains('hidden')) {
                    datePopover.style.left = `${dateFilter.offsetLeft}px`;
                }
            });

            const fp = flatpickr(document.getElementById('datepicker-container'), {
                inline: true,
                locale: "es",
                enableTime: true,
                time_24hr: true,
                dateFormat: "d/m/Y H:i",
            });

            applyDateBtn.addEventListener('click', () => {
                if (fp.selectedDates.length > 0) {
                     const selectedDate = fp.selectedDates[0];
                     const formattedDate = `${selectedDate.getDate().toString().padStart(2, '0')}/${(selectedDate.getMonth() + 1).toString().padStart(2, '0')}/${selectedDate.getFullYear()} a las ${selectedDate.getHours().toString().padStart(2, '0')}:${selectedDate.getMinutes().toString().padStart(2, '0')}`;
                     dateDisplay.textContent = formattedDate;
                }
                datePopover.classList.add('hidden');
            });
            
             document.querySelectorAll('.date-quick-select').forEach(button => {
                button.addEventListener('click', () => {
                    const dateType = button.dataset.date;
                    let displayText = '';
                    if (dateType === 'any') {
                        displayText = 'Cualquier fecha';
                        fp.clear();
                    } else if (dateType === 'today') {
                        const today = new Date();
                        fp.setDate(today, false);
                        displayText = 'Hoy';
                    } else if (dateType === 'tomorrow') {
                        const tomorrow = new Date();
                        tomorrow.setDate(tomorrow.getDate() + 1);
                        fp.setDate(tomorrow, false);
                        displayText = 'Mañana';
                    }
                    dateDisplay.textContent = displayText;
                    datePopover.classList.add('hidden');
                });
            });

            document.querySelectorAll('.time-block-select').forEach(button => {
                button.addEventListener('click', (e) => {
                    dateDisplay.textContent = e.currentTarget.innerText.replace('\n', ' ');
                    datePopover.classList.add('hidden');
                });
            });

            window.addEventListener('click', (e) => {
                if (!locationFilter.contains(e.target) && !locationPopover.contains(e.target)) {
                    locationPopover.classList.add('hidden');
                }
                if (!dateFilter.contains(e.target) && !datePopover.contains(e.target)) {
                    datePopover.classList.add('hidden');
                }
            });
        });
    </script>
     <script src="https://npmcdn.com/flatpickr/dist/l10n/es.js"></script>
</body>
</html>

