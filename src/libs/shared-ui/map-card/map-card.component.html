<!-- Elegant Map Card Container -->
<div
  class="elegant-map-container"
  [style.height]="height"
  [class.mobile-tab--cards]="isMobile && mobileTab === 'cards'"
  [class.mobile-tab--map]="isMobile && mobileTab === 'map'"
>

  <!-- Mobile-only Tabs: Cards / Map -->
  <div class="mobile-tabs" *ngIf="isMobile">
    <button
      type="button"
      class="mobile-tabs__btn"
      [class.active]="mobileTab === 'cards'"
      (click)="setMobileTab('cards')"
    >
      Cards
    </button>
    <button
      type="button"
      class="mobile-tabs__btn"
      [class.active]="mobileTab === 'map'"
      (click)="setMobileTab('map')"
    >
      Mapa
    </button>
  </div>
  
  <!-- Main Content Wrapper -->
  <div class="content-wrapper">
    
    <!-- Left Panel: Professionals Section -->
    <aside class="professionals-section" [class.mobile-hidden]="isMobile && mobileTab === 'map'">
      <div class="section-header">
        <h3 class="section-title">{{ professionals.length }} {{ title.toLowerCase() }}</h3>
      </div>
      
      <div class="professional-card-container">
        <!-- Highlighted Professional Card -->
        <ui-user-card 
          *ngIf="highlightedProfessional"
          [user]="convertToUserCardData(highlightedProfessional)"
          [variant]="'highlighted'"
          [size]="'md'"
          [buttonText]="'Ver perfil y Agendar'"
          [showRating]="true"
          (userClick)="onProfessionalClick(highlightedProfessional)"
          (buttonClick)="onProfessionalBook(highlightedProfessional)">
        </ui-user-card>

        <!-- Other Professionals -->
        <ng-container *ngFor="let p of professionals">
          <ui-user-card
            *ngIf="!highlightedProfessional || p.id !== highlightedProfessional.id"
            [user]="convertToUserCardData(p)"
            [variant]="'default'"
            [size]="'sm'"
            [buttonText]="'Ver perfil y Agendar'"
            [showRating]="true"
            (userClick)="onProfessionalClick(p)"
            (buttonClick)="onProfessionalBook(p)">
          </ui-user-card>
        </ng-container>
      </div>
    </aside>

    <!-- Right Panel: Map Section -->
    <div class="map-section" [class.mobile-hidden]="isMobile && mobileTab === 'cards'">
      <!-- Render MapView also on mobile, with reduced height -->
      <ui-map-view
        [title]="'Mapa de Servicios'"
        [subtitle]="'Encuentra servicios cerca de ti'"
        [markers]="mapMarkers"
        [center]="mapCenter"
        [zoom]="mapZoom"
        [height]="isMobile ? '280px' : '100%'"
        [showControls]="showMapControls"
        [showLegend]="showMapLegend"
        [allowFullscreen]="true"
        (markerClick)="onMarkerClick($event)"
        (markerAction)="onMarkerAction($event)"
        (viewModeChange)="onViewModeChange($event)"
        (searchHere)="onSearchHere($event)">
      </ui-map-view>
    </div>
    
  </div>
  
</div>
