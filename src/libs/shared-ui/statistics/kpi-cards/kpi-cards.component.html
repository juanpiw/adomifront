<div class="kpi-cards">
  <div class="kpi-card metric-card">
    <p class="kpi-label">Ingresos Totales ({{ rangeLabel || 'Periodo actual' }})</p>
    <p class="kpi-value text-indigo-600">
      <ng-container *ngIf="!loading && summary; else incomePlaceholder">
        {{ formatCurrency(summary.totalIncome) }}
      </ng-container>
    </p>
    <p class="kpi-trend text-slate-500">
      Basado en pagos completados
    </p>
  </div>

  <div class="kpi-card metric-card">
    <p class="kpi-label">Citas Realizadas</p>
    <p class="kpi-value text-teal-600">
      <ng-container *ngIf="!loading && summary; else appointmentsPlaceholder">
        {{ summary.completedAppointments | number:'1.0-0' }}
      </ng-container>
    </p>
    <p class="kpi-trend text-slate-500">
      Servicios completados en el rango seleccionado
    </p>
  </div>

  <div class="kpi-card metric-card">
    <p class="kpi-label">Valoración Promedio</p>
    <p class="kpi-value text-yellow-500">
      <ng-container *ngIf="!loading && summary && summary.reviewsCount > 0; else ratingPlaceholder">
        {{ summary.averageRating | number:'1.1-2' }}
      </ng-container>
    </p>
    <p class="kpi-trend text-green-500" *ngIf="summary && summary.reviewsCount > 0; else ratingMeta">
      ⭐⭐⭐⭐⭐
      ({{ summary.reviewsCount }} reseñas)
    </p>
  </div>

  <div class="kpi-card metric-card">
    <p class="kpi-label">Clientes Recurrentes</p>
    <p class="kpi-value text-purple-600">
      <ng-container *ngIf="!loading && summary && summary.totalClients > 0; else recurringPlaceholder">
        {{ formatPercent(summary.recurringRate) }}
      </ng-container>
    </p>
    <p class="kpi-trend text-green-500">
      Meta: 70%
    </p>
  </div>
</div>

<ng-template #incomePlaceholder>—</ng-template>
<ng-template #appointmentsPlaceholder>—</ng-template>
<ng-template #ratingPlaceholder>—</ng-template>
<ng-template #ratingMeta>
  <span class="kpi-trend text-slate-400">Sin reseñas recientes</span>
</ng-template>
<ng-template #recurringPlaceholder>—</ng-template>


