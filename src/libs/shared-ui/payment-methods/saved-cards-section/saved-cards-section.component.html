<section class="saved-cards-section">
  <h2 class="saved-cards-title">
    Mis MÃ©todos de Pago ({{ cards.length }})
  </h2>
  <div *ngIf="primaryCard() || preference==='cash'" style="margin:6px 0 12px; font-size:13px; color:#065f46; background:#ecfdf5; border:1px solid #10b981; padding:8px 10px; border-radius:8px;">
    <strong>MÃ©todo principal:</strong>
    <ng-container *ngIf="preference==='cash'">Pago en Efectivo</ng-container>
    <ng-container *ngIf="preference!=='cash' && primaryCard() as pc">
      **** **** {{ formatLast4(pc.lastFour) }} Â· {{ getCardTypeName(pc.type) }}
    </ng-container>
    <span style="margin-left:6px; opacity:.8;">Con este mÃ©todo se harÃ¡n los pagos por defecto.</span>
  </div>

  <div class="cards-list">
    <!-- OpciÃ³n Efectivo como tarjeta virtual -->
    <div class="card-item" [ngClass]="{ 'card-item--primary': preference === 'cash' }">
      <div class="card-info">
        <div class="card-icon">
          ðŸ’µ
        </div>
        <div class="card-details">
          <p class="card-type">Pago en Efectivo</p>
          <p class="card-number">Preferencia de cobro</p>
          <p class="card-expiry">â€”</p>
        </div>
      </div>
      <div class="card-actions">
        <div class="primary-status" *ngIf="preference === 'cash'">
          <button class="primary-badge primary-badge--button" disabled title="Ya es el mÃ©todo principal">
            <span class="hidden md:inline">MÃ©todo </span>Principal
          </button>
        </div>
        <button *ngIf="preference !== 'cash'"
                class="set-primary-btn"
                (click)="onSetPrimary('')">
          Usar pago en efectivo
        </button>
      </div>
    </div>
    <div *ngFor="let card of cards" 
         class="card-item"
         [ngClass]="{
           'card-item--visa': card.type === 'visa',
           'card-item--mastercard': card.type === 'mastercard',
           'card-item--amex': card.type === 'amex',
           'card-item--primary': card.isPrimary
         }">
      
      <div class="card-info">
        <div class="card-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect width="20" height="14" x="2" y="5" rx="2"/>
            <line x1="2" x2="22" y1="10" y2="10"/>
          </svg>
        </div>
        <div class="card-details">
          <p class="card-type">{{ getCardTypeName(card.type) }}</p>
          <p class="card-number">**** {{ card.lastFour }}</p>
          <p class="card-expiry">Vence: {{ card.expiryMonth }}/{{ card.expiryYear }}</p>
        </div>
      </div>
      
      <div class="card-actions">
        <div class="primary-status" *ngIf="card.isPrimary">
          <button class="primary-badge primary-badge--button" disabled title="Ya es el mÃ©todo principal">
            <span class="hidden md:inline">MÃ©todo </span>Principal
          </button>
        </div>
        <button *ngIf="!card.isPrimary" 
                class="set-primary-btn"
                (click)="onSetPrimary(card.id)">
          Hacer Principal
        </button>
        <button class="delete-card-btn" 
                (click)="onDeleteCard(card.id)"
                aria-label="Eliminar tarjeta">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M10 11v6"/>
            <path d="M14 11v6"/>
            <path d="M4 7h16"/>
            <path d="M6 7h12v11a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V7z"/>
            <path d="M9 5h6a2 2 0 0 0 2-2V1a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v2a2 2 0 0 0 2 2z"/>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <button class="add-card-btn" (click)="onAddCard()">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M5 12h14"/>
      <path d="M12 5v14"/>
    </svg>
    AÃ±adir Tarjeta
  </button>

  <div style="font-size:12px;color:#64748b;margin-top:8px;">Al elegir un mÃ©todo como principal, se usarÃ¡ por defecto en reservas.</div>
</section>








