<section class="inicio-solicitudes">
  <h3 class="inicio-solicitudes__title">Solicitudes de Reserva Pendientes</h3>
  
  <div *ngIf="filteredData.length === 0" class="inicio-solicitudes__empty">
    No tienes solicitudes de reserva pendientes.
  </div>
  
  <div class="inicio-solicitudes__scaffold" *ngIf="filteredData.length > 0" (mouseenter)="onMouseEnter()" (mouseleave)="onMouseLeave()">
    <button type="button" class="inicio-solicitudes__nav inicio-solicitudes__nav--left" (click)="scrollLeft()" aria-label="Anterior">‹</button>

    <div #scroller class="inicio-solicitudes__scroller" tabindex="0">
      <div *ngFor="let solicitud of filteredData" class="inicio-solicitudes__card inicio-solicitudes__snap">
        <div class="inicio-solicitudes__row">
          <div class="inicio-solicitudes__avatar" [class.inicio-solicitudes__avatar--fallback]="!solicitud.clientAvatar">
            <img
              [src]="solicitud.clientAvatar || fallbackAvatar"
              [alt]="solicitud.clientName"
              (error)="onAvatarError($event)"
            >
            <span class="inicio-solicitudes__avatar-initials">
              {{ getInitials(solicitud.clientName) }}
            </span>
          </div>
          <div class="ml-4">
            <p class="inicio-solicitudes__name">{{ solicitud.clientName }}</p>
            <p class="inicio-solicitudes__service">Solicita <span class="font-semibold text-slate-600">{{ solicitud.service }}</span></p>
          </div>
          <div class="ml-auto text-right">
            <p class="inicio-solicitudes__when">{{ solicitud.when }}</p>
            <p class="inicio-solicitudes__time">{{ solicitud.time }}</p>
          </div>
        </div>
        <div class="inicio-solicitudes__actions">
          <button 
            class="inicio-solicitudes__btn-accept" 
            (click)="onAcceptClick(solicitud)"
            [disabled]="loading">
            {{ loading ? 'Procesando...' : 'Aceptar' }}
          </button>
          <button 
            class="inicio-solicitudes__btn-decline" 
            (click)="onDeclineClick(solicitud)"
            [disabled]="loading">
            {{ loading ? 'Procesando...' : 'Rechazar' }}
          </button>
        </div>
      </div>
    </div>

    <button type="button" class="inicio-solicitudes__nav inicio-solicitudes__nav--right" (click)="scrollRight()" aria-label="Siguiente">›</button>

    <!-- Dots pagination -->
    <div class="inicio-solicitudes__dots" *ngIf="totalPages > 1">
      <button 
        *ngFor="let _ of [].constructor(totalPages); index as i" 
        type="button" 
        class="inicio-solicitudes__dot" 
        [class.inicio-solicitudes__dot--active]="i === currentPage"
        (click)="goTo(i)"
        aria-label="Ir a página {{ i + 1 }}">
      </button>
    </div>
  </div>

  <!-- Modales -->
  <app-accept-reserva-modal
    [isOpen]="showAcceptModal"
    [reservaData]="selectedSolicitud"
    [loading]="loading"
    (close)="onAcceptModalClose()"
    (confirm)="onAcceptConfirm($event)">
  </app-accept-reserva-modal>

  <app-reject-reserva-modal
    [isOpen]="showRejectModal"
    [reservaData]="selectedSolicitud"
    [loading]="loading"
    (close)="onRejectModalClose()"
    (confirm)="onRejectConfirm($event)">
  </app-reject-reserva-modal>
</section>
