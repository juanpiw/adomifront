<div class="rp-card">
  <button 
    *ngIf="data.estado === 'Completado'"
    type="button"
    class="rp-fav"
    [class.rp-fav--active]="data.isFavorite"
    (click)="onToggleFavorite.emit()"
    [attr.aria-label]="data.isFavorite ? 'Quitar de favoritos' : 'Agregar a favoritos'"
    [title]="data.isFavorite ? 'Quitar de favoritos' : 'Agregar a favoritos'">
    <ui-icon name="heart" class="rp-fav__icon"></ui-icon>
  </button>
  <div class="rp-row">
    <img [src]="data.avatarUrl" class="rp-avatar" [alt]="data.titulo">
    <div class="rp-info">
      <p class="rp-title">{{ data.titulo }}</p>
      <p class="rp-date">{{ data.fecha }}</p>
    </div>
    <div class="rp-right">
      <div style="display:flex; align-items:center; gap:8px; justify-content:flex-end;">
        <p class="rp-price" style="margin:0;">{{ data.precio }}</p>
      </div>
      <p class="rp-state">{{ data.estado || 'Completado' }}</p>
    </div>
  </div>
  <div *ngIf="data.estado === 'Completado'" class="rp-verified">
    Servicio verificado
  </div>
  <div class="rp-actions">
    <button class="rp-btn primary" (click)="onReview.emit()">Dejar una reseña</button>
    <button class="rp-btn dark" (click)="onReschedule.emit()">Volver a Agendar</button>
  </div>
  <div *ngIf="data.verificationCode" style="margin-top:8px;">
    <div style="font-size:12px;color:#64748b;margin-bottom:4px;">Código de verificación</div>
    <div style="font-weight:800;font-size:18px;letter-spacing:2px;">{{ data.verificationCode }}</div>
  </div>
</div>
